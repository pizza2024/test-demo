(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2727:(e,t,a)=>{Promise.resolve().then(a.bind(a,2600))},2600:(e,t,a)=>{"use strict";a.d(t,{default:()=>p});var n=a(5155),r=a(9510),s=a(650),o=a(2651),i=a(2115);let d="TRi9CnYFHBLX4Ax4vVjksPt7C9fjNb55yM",l="TL4aK8fm2QxYBQnJ4XE9ZEcjPnxocjePAJ";async function c(){let e;return window.tronLink.ready?e=window.tronLink.tronWeb:200===(await window.tronLink.request({method:"tron_requestAccounts"})).code&&(e=window.tronLink.tronWeb),e}function p(){let e=(0,i.useRef)();(0,r.A)(async()=>{window.tronLink.ready&&(e.current=window.tronLink.tronWeb)},[]);let[t,a]=(0,s.A)({ownerAddress:"TQtbhpDPN6C8RULCFfFzsK1g7Yg5EqU1Et",testAddress1:d,testAddress2:l,activesJSON:JSON.stringify([{type:2,permission_name:"Hello World",threshold:2,operations:"7fff1fc0037e0000000000000000000000000000000000000000000000000000",keys:[{address:d,weight:1},{address:l,weight:1}]}],null,2),accountInfo:"",unsignedTransaction:"",from:"",grantedPermissionId:2,to:"",amount:0,multiSignedTransaction:"",approvedList:"",broadcastResult:""}),p=async()=>{let a=JSON.parse(t.activesJSON),n=await o.A.post("https://api.nileex.io/wallet/accountpermissionupdate",{owner_address:t.ownerAddress,actives:a,owner:{type:0,permission_name:"owner",threshold:1,keys:[{address:t.ownerAddress,weight:1}]},visible:!0},{headers:{accept:"application/json","content-type":"application/json"}});if(e.current){let t=await e.current.trx.sign(n.data);console.log(await e.current.trx.sendRawTransaction(t))}},x=()=>{o.A.post("https://api.nileex.io/wallet/getaccount",{address:t.ownerAddress,visible:!0},{headers:{"Content-Type":"text/plain"}}).then(e=>{200===e.status&&(console.log(e.data),a({accountInfo:JSON.stringify(e.data,null,2)}))})},m=async t=>await e.current.transactionBuilder.sendTrx(t.to,t.amount,t.from,{permissionId:t.permissionId}),g=async t=>await e.current.trx.multiSign(t);return(0,n.jsxs)("div",{className:"flex items-center justify-center w-full flex-col gap-8 py-[5rem]",children:[(0,n.jsx)(u,{onClick:()=>{c()},children:"Connect Wallet"}),(0,n.jsx)("input",{type:"text",className:"border p-4 text-[#232323] w-[800px]",placeholder:"owner",value:t.ownerAddress,onChange:e=>{a({ownerAddress:e.target.value})}}),(0,n.jsx)("textarea",{className:"border p-4 text-[#232323] w-[800px] h-[500px]",value:t.activesJSON,onChange:e=>{a({activesJSON:e.target.value})}}),(0,n.jsx)(u,{onClick:()=>{p()},children:"updatePermission"}),(0,n.jsx)("div",{className:"border border-[#DDD] border-3 w-[800px]"}),(0,n.jsx)("textarea",{className:"border p-4 text-[#232323] w-[800px] h-[500px]",value:t.accountInfo,onChange:e=>{a({accountInfo:e.target.value})}}),(0,n.jsx)(u,{onClick:()=>{x()},children:"getAccount"}),(0,n.jsx)("div",{className:"border border-[#DDD] border-3 w-[800px]"}),(0,n.jsx)("input",{className:"border p-4 text-[#232323] w-[800px]",type:"text",placeholder:"from",value:t.from,onChange:e=>{a({from:e.target.value})}}),(0,n.jsx)("input",{value:t.to,className:"border p-4 text-[#232323] w-[800px]",type:"text",placeholder:"to",onChange:e=>{a({to:e.target.value})}}),(0,n.jsx)("input",{value:t.amount,className:"border p-4 text-[#232323] w-[800px]",type:"text",placeholder:"amount",onChange:e=>{a({amount:+e.target.value})}}),(0,n.jsx)("input",{value:t.grantedPermissionId,className:"border p-4 text-[#232323] w-[800px]",type:"text",placeholder:"permission id",onChange:e=>{a({grantedPermissionId:+e.target.id})}}),(0,n.jsx)(u,{onClick:async()=>{a({unsignedTransaction:JSON.stringify(await m({amount:t.amount,from:t.from,permissionId:t.grantedPermissionId,to:t.to}),null,2)})},children:"getUnsignedTransaction"}),(0,n.jsx)("textarea",{placeholder:"unsignedTransaction",className:"border p-4 text-[#232323] w-[800px] h-[500px]",value:t.unsignedTransaction,onChange:e=>{a({unsignedTransaction:e.target.value})}}),(0,n.jsx)("div",{className:"border border-[#DDD] border-3 w-[800px]"}),(0,n.jsx)(u,{onClick:async()=>{a({multiSignedTransaction:JSON.stringify(await g(JSON.parse(t.unsignedTransaction)))})},children:"getMultiSignedTransaction"}),(0,n.jsx)("textarea",{placeholder:"multiSignedTransaction",className:"border p-4 text-[#232323] w-[800px] h-[500px]",value:t.multiSignedTransaction,onChange:e=>{a({multiSignedTransaction:e.target.value})}}),(0,n.jsx)("div",{className:"border border-[#DDD] border-3 w-[800px]"}),(0,n.jsx)(u,{onClick:async()=>{a({approvedList:JSON.stringify(await e.current.trx.getApprovedList(JSON.parse(t.multiSignedTransaction)),null,2)})},children:"getApprovedList"}),(0,n.jsx)("textarea",{className:"border p-4 text-[#232323] w-[800px] h-[500px]",disabled:!0,value:t.approvedList}),(0,n.jsx)("div",{className:"border border-[#DDD] border-3 w-[800px]"}),(0,n.jsx)(u,{onClick:async()=>{a({broadcastResult:JSON.stringify(await e.current.trx.broadcast(JSON.parse(t.multiSignedTransaction)))})},children:"Broadcast Transaction"}),(0,n.jsx)("textarea",{placeholder:"broadcast result",className:"border p-4 text-[#232323] w-[800px] h-[500px]",disabled:!0,value:t.broadcastResult})]})}function u(e){return(0,n.jsx)("button",{...e,className:"border border-[#DDD] p-1 text-[1rem] rounded",children:e.children})}}},e=>{var t=t=>e(e.s=t);e.O(0,[765,441,517,358],()=>t(2727)),_N_E=e.O()}]);